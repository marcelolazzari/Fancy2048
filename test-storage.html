<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Test - Fancy2048</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .storage-item { 
            margin: 10px 0; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px;
        }
        .key { font-weight: bold; color: #0066cc; }
        .value { margin-top: 5px; word-break: break-all; }
        button { 
            padding: 10px 15px; 
            margin: 5px; 
            background: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer;
        }
        button:hover { background: #45a049; }
        .clear-btn { background: #f44336; }
        .clear-btn:hover { background: #da190b; }
    </style>
</head>
<body>
    <h1>Fancy2048 Storage Test</h1>
    <button onclick="checkStorage()">üîç Check Storage</button>
    <button onclick="clearAllStorage()" class="clear-btn">üóëÔ∏è Clear All Storage</button>
    <button onclick="createTestGame()">üéÆ Create Test Game</button>
    
    <div id="storage-content"></div>

    <script>
        function checkStorage() {
            const content = document.getElementById('storage-content');
            content.innerHTML = '<h2>localStorage Contents:</h2>';
            
            if (localStorage.length === 0) {
                content.innerHTML += '<p><em>No items in localStorage</em></p>';
                return;
            }
            
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'storage-item';
                
                let displayValue = value;
                try {
                    const parsed = JSON.parse(value);
                    displayValue = JSON.stringify(parsed, null, 2);
                } catch (e) {
                    // Not JSON, display as is
                }
                
                itemDiv.innerHTML = `
                    <div class="key">${key}</div>
                    <div class="value"><pre>${displayValue}</pre></div>
                `;
                
                content.appendChild(itemDiv);
            }
        }
        
        function clearAllStorage() {
            if (confirm('Are you sure you want to clear all localStorage?')) {
                localStorage.clear();
                alert('Storage cleared!');
                checkStorage();
            }
        }
        
        function createTestGame() {
            const testGame = {
                score: 1024,
                moves: 42,
                duration: 300000,
                maxTile: 128,
                won: false,
                playerType: 'human',
                aiType: null,
                timestamp: Date.now(),
                boardSize: 4,
                gameId: Date.now() + '-test',
                date: new Date().toISOString(),
                bestTile: 128,
                bestScore: 1024,
                time: '05:00',
                gridSize: 4,
                gridType: '4x4',
                playMode: 'Human',
                isAutoPlayed: false
            };
            
            // Save to human games storage
            let humanGames = JSON.parse(localStorage.getItem('fancy2048_human_games') || '[]');
            humanGames.push(testGame);
            localStorage.setItem('fancy2048_human_games', JSON.stringify(humanGames));
            
            alert('Test game created and saved to fancy2048_human_games!');
            checkStorage();
        }
        
        // Check storage on page load
        checkStorage();
    </script>
</body>
</html>
