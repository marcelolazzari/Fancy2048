<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test - Fancy2048</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: rgba(76, 175, 80, 0.2); border-left: 4px solid #4CAF50; }
        .error { background: rgba(244, 67, 54, 0.2); border-left: 4px solid #f44336; }
        .warning { background: rgba(255, 152, 0, 0.2); border-left: 4px solid #ff9800; }
        .info { background: rgba(33, 150, 243, 0.2); border-left: 4px solid #2196F3; }
    </style>
</head>
<body>
    <h1>🐛 Debug Test - Fancy2048</h1>
    <p>Testing the fixed page layout...</p>
    
    <div id="test-results"></div>
    
    <iframe 
        src="http://127.0.0.1:3000/pages/index.html" 
        width="100%" 
        height="600px" 
        style="border: 2px solid #333; border-radius: 8px; margin: 20px 0;">
    </iframe>
    
    <script>
        const results = document.getElementById('test-results');
        
        function log(type, message) {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = `${message}`;
            results.appendChild(div);
        }
        
        // Test basic functionality
        log('info', '🔍 Testing if the page loads in iframe...');
        
        // Listen for iframe load
        const iframe = document.querySelector('iframe');
        iframe.onload = function() {
            log('success', '✅ Iframe loaded successfully');
            
            try {
                // Try to access iframe content (may be blocked by same-origin policy)
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                if (iframeDoc) {
                    const title = iframeDoc.title;
                    log('success', `✅ Iframe title: ${title}`);
                    
                    const gameElement = iframeDoc.getElementById('board-container');
                    if (gameElement) {
                        log('success', '✅ Board container found in iframe');
                    } else {
                        log('warning', '⚠️ Board container not found in iframe');
                    }
                } else {
                    log('info', 'ℹ️ Cannot access iframe content (same-origin policy)');
                }
            } catch (error) {
                log('warning', `⚠️ Cannot inspect iframe: ${error.message}`);
            }
        };
        
        iframe.onerror = function() {
            log('error', '❌ Failed to load iframe');
        };
        
        // Direct tests
        log('info', '🧪 Running direct tests...');
        
        // Test CSS file accessibility
        fetch('/styles/main.css')
            .then(response => {
                if (response.ok) {
                    log('success', '✅ main.css is accessible');
                } else {
                    log('error', '❌ main.css not accessible');
                }
            })
            .catch(error => {
                log('error', `❌ Failed to fetch main.css: ${error.message}`);
            });
            
        // Test JS files accessibility
        const jsFiles = [
            '/scripts/game.js',
            '/scripts/enhanced_ai.js', 
            '/scripts/advanced_ai_solver.js',
            '/scripts/ai_learning_system.js'
        ];
        
        jsFiles.forEach(file => {
            fetch(file)
                .then(response => {
                    if (response.ok) {
                        log('success', `✅ ${file} is accessible`);
                    } else {
                        log('error', `❌ ${file} not accessible`);
                    }
                })
                .catch(error => {
                    log('error', `❌ Failed to fetch ${file}: ${error.message}`);
                });
        });
        
        setTimeout(() => {
            log('info', '🔗 Direct link test: <a href="http://127.0.0.1:3000/pages/index.html" target="_blank" style="color: #ffcc00;">Open Fancy2048 in new tab</a>');
        }, 2000);
        
    </script>
</body>
</html>
