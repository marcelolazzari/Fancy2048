<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vision2048 - Hand Gesture Control</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Play 2048 with hand gestures! Control the game using your device camera and hand movements. Experience the future of gaming.">
    <meta name="keywords" content="vision 2048, hand gesture game, camera control, AI vision, gesture recognition">
    <meta name="author" content="Fancy2048">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Vision2048 - Hand Gesture Control">
    <meta property="og:description" content="Play 2048 with hand gestures! Control the game using your device camera and hand movements.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="../src/assets/icon-512.png">
    <meta property="og:site_name" content="Fancy2048">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Vision2048 - Hand Gesture Control">
    <meta name="twitter:description" content="Experience 2048 with hand gesture controls using your camera!">
    <meta name="twitter:image" content="../src/assets/icon-512.png">
    
    <!-- Theme and App Meta Tags -->
    <meta name="theme-color" content="#1a1a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vision2048">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="../src/assets/favicon.svg">
    <link rel="apple-touch-icon" href="../src/assets/icon-192.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="../manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../src/css/main.css">
    <link rel="stylesheet" href="../src/css/vision.css">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body data-page="vision">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav" role="navigation" aria-label="Main navigation">
                <div class="nav-brand">
                    <h1 class="logo">
                        <span class="logo-icon">üëÅÔ∏è</span>
                        Vision2048
                    </h1>
                </div>
                
                <div class="nav-controls">
                    <button id="back-button" class="nav-button" title="Back to Main Game" aria-label="Back to main game">
                        <span class="nav-icon">‚Üê</span>
                        <span class="nav-text">Back</span>
                    </button>
                    
                    <button id="theme-toggle" class="nav-button" title="Toggle theme" aria-label="Toggle dark/light theme">
                        <span class="theme-icon-light">‚òÄÔ∏è</span>
                        <span class="theme-icon-dark">üåô</span>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main vision-main">
        <div class="container">
            <!-- Camera Setup Section -->
            <section class="camera-section" aria-label="Camera setup">
                <div class="camera-container">
                    <video id="camera-video" class="camera-video" autoplay muted playsinline></video>
                    <canvas id="gesture-canvas" class="gesture-canvas"></canvas>
                    
                    <!-- Camera Status -->
                    <div id="camera-status" class="camera-status">
                        <div class="status-indicator" id="camera-indicator">
                            <span class="status-dot"></span>
                            <span class="status-text">Camera Off</span>
                        </div>
                        <div class="status-indicator" id="gesture-indicator">
                            <span class="status-dot"></span>
                            <span class="status-text">No Gesture</span>
                        </div>
                    </div>
                    
                    <!-- Camera Controls -->
                    <div class="camera-controls">
                        <button id="start-camera" class="camera-button primary">
                            <span class="button-icon">üì∑</span>
                            <span class="button-text">Start Camera</span>
                        </button>
                        <button id="stop-camera" class="camera-button secondary" disabled>
                            <span class="button-icon">‚èπÔ∏è</span>
                            <span class="button-text">Stop Camera</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Game Section -->
            <section class="game-section" aria-label="Game area">
                <div class="game-info">
                    <div class="game-stats">
                        <div class="stat-item">
                            <span class="stat-label">Score</span>
                            <span id="current-score" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Best</span>
                            <span id="best-score" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Moves</span>
                            <span id="move-count" class="stat-value">0</span>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button id="new-game" class="control-button primary">New Game</button>
                        <button id="undo-move" class="control-button secondary" disabled>Undo</button>
                    </div>
                </div>

                <div class="game-container" aria-label="Game board">
                    <div id="game-board" class="game-board" role="grid" aria-label="2048 game board">
                        <!-- Game tiles will be generated here -->
                    </div>
                    
                    <!-- Game Over Overlay -->
                    <div id="game-over-overlay" class="game-overlay hidden" role="dialog" aria-labelledby="game-over-title">
                        <div class="overlay-content">
                            <h2 id="game-over-title" class="overlay-title">Game Over!</h2>
                            <p class="overlay-message">No more moves available</p>
                            <div class="overlay-score">
                                <span>Final Score: </span>
                                <span id="final-score" class="score-highlight">0</span>
                            </div>
                            <button id="restart-game" class="overlay-button">Try Again</button>
                        </div>
                    </div>
                    
                    <!-- Victory Overlay -->
                    <div id="victory-overlay" class="game-overlay hidden" role="dialog" aria-labelledby="victory-title">
                        <div class="overlay-content">
                            <h2 id="victory-title" class="overlay-title">üéâ You Win!</h2>
                            <p class="overlay-message">You reached 2048!</p>
                            <div class="overlay-actions">
                                <button id="continue-game" class="overlay-button secondary">Keep Playing</button>
                                <button id="new-game-victory" class="overlay-button primary">New Game</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gesture Instructions -->
            <section class="instructions-section" aria-label="Gesture instructions">
                <h2 class="instructions-title">Finger Tracking Controls</h2>
                <div class="gesture-grid">
                    <div class="gesture-item">
                        <div class="gesture-icon">üëà</div>
                        <div class="gesture-label">Move Left</div>
                        <div class="gesture-description">Move your index finger left</div>
                    </div>
                    <div class="gesture-item">
                        <div class="gesture-icon">üëâ</div>
                        <div class="gesture-label">Move Right</div>
                        <div class="gesture-description">Move your index finger right</div>
                    </div>
                    <div class="gesture-item">
                        <div class="gesture-icon">üëÜ</div>
                        <div class="gesture-label">Move Up</div>
                        <div class="gesture-description">Move your index finger up</div>
                    </div>
                    <div class="gesture-item">
                        <div class="gesture-icon">üëá</div>
                        <div class="gesture-label">Move Down</div>
                        <div class="gesture-description">Move your index finger down</div>
                    </div>
                </div>
                
                <div class="instructions-note">
                    <p><strong>How it works:</strong> Hold up your index finger and move it in the direction you want the tiles to go. The system will track your finger position and detect movement patterns to control the game.</p>
                    <p><strong>Tips:</strong> Good lighting helps tracking accuracy. Make smooth, deliberate movements for best results.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                ¬© 2025 Vision2048. Experience gaming with hand gestures.
                <a href="./index.html" class="footer-link">Classic Game</a> |
                <a href="./stats.html" class="footer-link">Statistics</a> |
                <a href="https://github.com/marcelolazzari/Fancy2048" class="footer-link" target="_blank" rel="noopener">GitHub</a>
            </p>
        </div>
    </footer>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üëÅÔ∏è Vision2048</div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Initializing camera and gesture recognition...</div>
        </div>
    </div>

    <!-- MediaPipe Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <!-- Scripts -->
    <script src="../src/js/error-handler.js"></script>
    <script src="../src/js/utils.js"></script>
    <script src="../src/js/storage.js"></script>
    <script src="../src/js/game-engine.js"></script>
    <script src="../src/js/ui-controller.js"></script>
    <script src="../src/js/vision-handler.js"></script>
    <script src="../src/js/vision-app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('../service-worker.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
