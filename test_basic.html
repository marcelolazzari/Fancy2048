<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fancy2048 - Basic Test</title>
    <link rel="stylesheet" href="../styles/unified_styles_fixed.css" />
</head>
<body>
    <header>
        <h1>Fancy2048 - Basic Test</h1>
    </header>

    <main>
        <div id="board-container" role="grid" aria-label="Game Board" tabindex="0"></div>
        <div id="score-container">
            <ul>
                <li>Score: <span id="score">0</span></li>
                <li>Best: <span id="best-score">0</span></li>
                <li>Moves: <span id="moves">0</span></li>
                <li>Time: <span id="time">00:00</span></li>
            </ul>
        </div>
        
        <div style="margin: 20px; text-align: center;">
            <button onclick="testGameInit()">Test Game Initialization</button>
            <button onclick="testDirectInit()">Direct Game Init</button>
            <button onclick="showDebugInfo()">Show Debug Info</button>
        </div>
        
        <div id="debug-info" style="
            background: #333; 
            color: #0f0; 
            padding: 15px; 
            font-family: monospace; 
            font-size: 12px;
            margin: 20px;
            border-radius: 5px;
            white-space: pre-line;
        "></div>
    </main>

    <script>
        console.log('üéÆ Basic test page loading...');
        
        let debugInfo = [];
        
        function addDebug(message) {
            const timestamp = new Date().toLocaleTimeString();
            debugInfo.push(`[${timestamp}] ${message}`);
            console.log(message);
        }
        
        function showDebugInfo() {
            const debugDiv = document.getElementById('debug-info');
            debugDiv.textContent = debugInfo.join('\n');
        }
        
        function testGameInit() {
            addDebug('üîç Testing game initialization...');
            
            // Check required elements
            const requiredElements = ['board-container', 'score', 'best-score', 'moves', 'time'];
            const missing = requiredElements.filter(id => !document.getElementById(id));
            
            if (missing.length > 0) {
                addDebug(`‚ùå Missing elements: ${missing.join(', ')}`);
                return false;
            }
            
            addDebug('‚úÖ All required elements present');
            
            // Check if scripts loaded
            if (typeof Game === 'undefined') {
                addDebug('‚ùå Game class not available');
                return false;
            }
            
            addDebug('‚úÖ Game class available');
            return true;
        }
        
        function testDirectInit() {
            addDebug('üöÄ Attempting direct game initialization...');
            
            try {
                if (typeof Game === 'undefined') {
                    throw new Error('Game class not loaded');
                }
                
                window.testGame = new Game(4);
                addDebug('‚úÖ Game instance created successfully');
                addDebug(`Game size: ${window.testGame.size}x${window.testGame.size}`);
                addDebug(`Game state: ${window.testGame.gameState}`);
                
                return true;
            } catch (error) {
                addDebug(`‚ùå Game initialization failed: ${error.message}`);
                addDebug(`Stack trace: ${error.stack}`);
                return false;
            }
        }
        
        // Pre-load checks
        document.addEventListener('DOMContentLoaded', () => {
            addDebug('üìÑ DOM Content Loaded');
            addDebug(`Document ready state: ${document.readyState}`);
            
            setTimeout(() => {
                testGameInit();
                showDebugInfo();
            }, 100);
        });
        
        addDebug('üìã Basic test script loaded');
    </script>
    
    <!-- Load game scripts -->
    <script src="../scripts/advanced_ai_solver.js" onerror="console.log('Failed to load advanced_ai_solver.js')"></script>
    <script src="../scripts/enhanced_ai.js" onerror="console.log('Failed to load enhanced_ai.js')"></script>
    <script src="../scripts/game.js" onerror="console.log('Failed to load game.js')"></script>
    
    <script>
        addDebug('üîç Script loading completed');
        addDebug(`Available classes: AdvancedAI=${typeof AdvancedAI2048Solver !== 'undefined'}, EnhancedAI=${typeof Enhanced2048AI !== 'undefined'}, Game=${typeof Game !== 'undefined'}`);
    </script>
</body>
</html>
