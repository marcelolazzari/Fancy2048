<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fancy2048 Layout Test</title>
    <link rel="stylesheet" href="styles/unified_styles_fixed.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .test-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
            max-width: 200px;
        }
        .test-status {
            margin: 5px 0;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
    </style>
</head>
<body>
    <div class="test-info">
        <h4>Layout Test Status</h4>
        <div id="test-results"></div>
    </div>

    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header section -->
    <header>
      <div class="container">
        <h1 class="game-title" tabindex="0">Fancy 2048 - Layout Test</h1>
        <nav aria-label="Game controls">
          <ul id="controls-container" class="controls" role="menubar">
            <li role="none">
              <button type="button" id="changeColor-button" aria-label="Change Color" tabindex="0" role="menuitem">
                <i class="fas fa-palette" aria-hidden="true"></i>
              </button>
            </li>
            <li role="none">
              <button type="button" id="leaderboard-button" aria-label="View Statistics" tabindex="0" role="menuitem">
                <i class="fas fa-chart-line" aria-hidden="true"></i>
              </button>
            </li>
            <li role="none">
              <button type="button" id="back-button" aria-label="Undo Move" tabindex="0" role="menuitem">
                <i class="fas fa-undo" aria-hidden="true"></i>
              </button>
            </li>
            <li role="none">
              <button type="button" id="pause-button" aria-label="Pause Game" tabindex="0" role="menuitem">
                <i class="fas fa-pause" aria-hidden="true"></i>
              </button>
            </li>
            <li role="none">
              <button type="button" id="board-size-button" aria-label="Change Board Size" tabindex="0" role="menuitem">
                <i class="fas fa-th" aria-hidden="true"></i>
              </button>
            </li>
            <li role="none">
              <button type="button" id="theme-toggle-button" aria-label="Toggle Theme" tabindex="0" role="menuitem">
                <i class="fas fa-adjust" aria-hidden="true"></i>
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Main content section -->
    <main id="main-content">
      <section class="game-section">
        <!-- Score Container -->
        <aside id="score-container" aria-labelledby="score-title">
          <h2 id="score-title" class="visually-hidden">Score Information</h2>
          <ul>
            <li>Score: <span id="score">12345</span></li>
            <li>Best: <span id="best-score">67890</span></li>
            <li>Moves: <span id="moves">42</span></li>
            <li>Time: <span id="time">02:34</span></li>
          </ul>
        </aside>

        <!-- Game Board -->
        <div id="board-container" class="board-container" role="grid" aria-label="Game Board" tabindex="0">
          <!-- Grid cells will be generated by JavaScript -->
          <!-- Sample grid cells for layout testing -->
          <div class="grid-cell">
            <div class="tile" data-value="2">2</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="4">4</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="8">8</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="16">16</div>
          </div>
          <div class="grid-cell"></div>
          <div class="grid-cell">
            <div class="tile" data-value="32">32</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="64">64</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="128">128</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="256">256</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="512">512</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="1024">1024</div>
          </div>
          <div class="grid-cell">
            <div class="tile" data-value="2048">2048</div>
          </div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        
        <div id="game-over" class="hidden" role="alert" aria-live="assertive">Game Over!</div>
      </section>
    </main>

    <!-- Footer section -->
    <footer>
      <div class="container">
        <button type="button" id="reset-button" aria-label="Reset Game" tabindex="0">Reset</button>
      </div>
    </footer>

    <script>
        // Layout test script
        document.addEventListener('DOMContentLoaded', () => {
            const testResults = document.getElementById('test-results');
            
            function addTestResult(message, status = 'success') {
                const div = document.createElement('div');
                div.className = `test-status ${status}`;
                div.textContent = message;
                testResults.appendChild(div);
            }
            
            // Test 1: Check if elements exist
            const requiredElements = [
                'board-container', 'score-container', 'controls-container',
                'changeColor-button', 'reset-button'
            ];
            
            requiredElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    addTestResult(`✓ ${id} found`, 'success');
                } else {
                    addTestResult(`✗ ${id} missing`, 'error');
                }
            });
            
            // Test 2: Check CSS loading
            const boardContainer = document.getElementById('board-container');
            if (boardContainer) {
                const computedStyle = window.getComputedStyle(boardContainer);
                const display = computedStyle.display;
                const gridCols = computedStyle.gridTemplateColumns;
                
                if (display === 'grid') {
                    addTestResult('✓ Board grid layout', 'success');
                } else {
                    addTestResult('✗ Board not grid', 'error');
                }
                
                if (gridCols.includes('fr')) {
                    addTestResult('✓ Grid columns set', 'success');
                } else {
                    addTestResult('✗ Grid cols missing', 'warning');
                }
            }
            
            // Test 3: Check CSS variables
            const rootStyle = getComputedStyle(document.documentElement);
            const primaryColor = rootStyle.getPropertyValue('--primary-color').trim();
            const highlightColor = rootStyle.getPropertyValue('--highlight-color').trim();
            
            if (primaryColor) {
                addTestResult('✓ CSS variables loaded', 'success');
            } else {
                addTestResult('✗ CSS vars missing', 'error');
            }
            
            // Test 4: Check responsive design
            function checkResponsiveness() {
                const viewport = {
                    width: window.innerWidth,
                    height: window.innerHeight
                };
                
                addTestResult(`Screen: ${viewport.width}x${viewport.height}`, 'success');
                
                if (viewport.width < 768) {
                    addTestResult('✓ Mobile layout active', 'success');
                } else {
                    addTestResult('✓ Desktop layout active', 'success');
                }
            }
            
            checkResponsiveness();
            window.addEventListener('resize', checkResponsiveness);
            
            // Test 5: Check tile styling
            const tiles = document.querySelectorAll('.tile');
            if (tiles.length > 0) {
                addTestResult(`✓ ${tiles.length} tiles rendered`, 'success');
                
                // Check if tiles have proper styling
                const firstTile = tiles[0];
                const tileStyle = getComputedStyle(firstTile);
                const position = tileStyle.position;
                
                if (position === 'absolute') {
                    addTestResult('✓ Tile positioning', 'success');
                } else {
                    addTestResult('✗ Tile position issue', 'warning');
                }
            } else {
                addTestResult('✗ No tiles found', 'warning');
            }
            
            // Final summary
            setTimeout(() => {
                addTestResult('--- Test Complete ---', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
