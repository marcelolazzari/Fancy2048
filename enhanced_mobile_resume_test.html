<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-content">
  
  <!-- Enhanced PWA mobile support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Fancy2048">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a1a1a">
  
  <title>Fancy2048 - Enhanced Mobile Resume Test</title>
  <link rel="stylesheet" href="styles/unified_styles_fixed.css">
  
  <style>
    .test-info {
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      margin: 20px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .test-info h2 {
      color: #ffcc00;
      margin: 0 0 15px 0;
      font-size: 1.4rem;
    }
    
    .test-info h3 {
      color: #4ecdc4;
      margin: 20px 0 10px 0;
      font-size: 1.1rem;
    }
    
    .test-info ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .test-info li {
      margin: 8px 0;
      line-height: 1.4;
    }
    
    .test-button {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
      font-size: 14px;
      transition: all 0.3s ease;
      min-width: 120px;
    }
    
    .test-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }
    
    .test-button.warning {
      background: linear-gradient(45deg, #ff6b6b, #ff8e53);
    }
    
    .test-button.success {
      background: linear-gradient(45deg, #4CAF50, #45a049);
    }
    
    iframe {
      width: 100%;
      height: 70vh;
      border: none;
      border-radius: 12px;
      margin-top: 10px;
    }

    .feature-highlight {
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid #4CAF50;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }

    .feature-highlight strong {
      color: #4CAF50;
    }
  </style>
</head>
<body>
  <div class="test-info">
    <h2>üéÆ Enhanced Mobile Resume Experience Test</h2>
    <p>This test demonstrates the improved mobile auto-pause experience with dedicated resume buttons:</p>
    
    <div class="feature-highlight">
      <strong>üÜï New Features:</strong>
      <ul>
        <li><strong>Dedicated Resume Button</strong> - Clear call-to-action button in mobile auto-pause messages</li>
        <li><strong>Enhanced Toast Design</strong> - Better layout with icon, text, and action button</li>
        <li><strong>Longer Display Time</strong> - 8 seconds for auto-pause, 4 seconds for user pause</li>
        <li><strong>Improved User Feedback</strong> - Clear distinction between auto-pause and manual pause</li>
        <li><strong>Touch-Friendly Design</strong> - Larger touch targets and responsive interactions</li>
      </ul>
    </div>
    
    <h3>üß™ Test Instructions:</h3>
    <ul>
      <li><strong>Auto-Pause Test:</strong> Start playing, then switch apps/tabs - see the enhanced auto-pause message with resume button</li>
      <li><strong>Manual Pause Test:</strong> Use the pause button - notice the different styled message for user-initiated pause</li>
      <li><strong>Button Interaction:</strong> Try both tapping the resume button and tapping elsewhere on the message</li>
      <li><strong>Timeout Test:</strong> Wait 8 seconds for auto-pause messages to auto-dismiss</li>
      <li><strong>Responsive Test:</strong> Test in different orientations and screen sizes</li>
    </ul>
    
    <h3>‚ú® Enhanced Mobile Features:</h3>
    <ul>
      <li><strong>Auto-Pause Message:</strong> Green resume button, 8-second timeout, "Game Auto-Paused" title</li>
      <li><strong>User Pause Message:</strong> Orange-themed, 4-second timeout, "Game Paused" title</li>
      <li><strong>Smart Layout:</strong> Icon, title/subtitle, and action button in responsive design</li>
      <li><strong>Visual Feedback:</strong> Hover effects, press animations, and smooth transitions</li>
      <li><strong>Accessibility:</strong> Proper contrast, touch targets, and keyboard navigation</li>
    </ul>
    
    <div style="text-align: center; margin: 20px 0;">
      <button class="test-button success" onclick="testAutoResume()">üîÑ Test Auto-Resume</button>
      <button class="test-button" onclick="testUserPause()">‚è∏Ô∏è Test User Pause</button>
      <button class="test-button warning" onclick="clearAllMessages()">üßπ Clear Messages</button>
    </div>
  </div>

  <iframe src="pages/index.html" title="Fancy2048 Game with Enhanced Mobile Resume"></iframe>

  <script>
    function testAutoResume() {
      // Create a test auto-resume message
      const message = document.createElement('div');
      message.id = 'test-auto-resume';
      message.className = 'mobile-pause-toast enhanced-resume';
      message.innerHTML = `
        <div class="toast-content-enhanced">
          <div class="toast-icon">
            <i class="fas fa-pause-circle"></i>
          </div>
          <div class="toast-text">
            <span class="toast-title">Game Auto-Paused</span>
            <span class="toast-subtitle">Tap resume to continue</span>
          </div>
          <button class="mobile-resume-btn" id="test-resume-btn">
            <i class="fas fa-play"></i>
            Resume
          </button>
        </div>
      `;
      
      message.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 16px 20px;
        border-radius: 20px;
        font-size: 14px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        animation: slideInTop 0.4s ease-out;
        max-width: calc(100vw - 40px);
        min-width: 280px;
      `;
      
      document.body.appendChild(message);
      
      // Add functionality to resume button
      const resumeBtn = message.querySelector('#test-resume-btn');
      resumeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        message.style.animation = 'slideOutTop 0.3s ease-in forwards';
        setTimeout(() => message.remove(), 300);
        showNotification('‚úÖ Game resumed via button!', 'success');
      });
      
      // Add tap-to-dismiss for entire message
      message.addEventListener('click', (e) => {
        if (!e.target.closest('#test-resume-btn')) {
          message.style.animation = 'slideOutTop 0.3s ease-in forwards';
          setTimeout(() => message.remove(), 300);
          showNotification('‚úÖ Game resumed via tap!', 'info');
        }
      });
      
      // Auto-dismiss after 8 seconds
      setTimeout(() => {
        if (message.parentNode) {
          message.style.animation = 'slideOutTop 0.3s ease-in forwards';
          setTimeout(() => message.remove(), 300);
        }
      }, 8000);
    }

    function testUserPause() {
      // Create a test user pause message
      const message = document.createElement('div');
      message.id = 'test-user-pause';
      message.className = 'pause-reminder-toast enhanced-user-pause';
      message.innerHTML = `
        <div class="toast-content-enhanced">
          <div class="toast-icon">
            <i class="fas fa-pause"></i>
          </div>
          <div class="toast-text">
            <span class="toast-title">Game Paused</span>
            <span class="toast-subtitle">Manually paused by you</span>
          </div>
          <button class="mobile-resume-btn" id="test-user-resume-btn">
            <i class="fas fa-play"></i>
            Resume
          </button>
        </div>
      `;
      
      message.style.cssText = `
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
        background: rgba(255, 153, 0, 0.92);
        color: white;
        padding: 16px 20px;
        border-radius: 20px;
        font-size: 14px;
        backdrop-filter: blur(15px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        animation: pulseIn 0.3s ease-out;
        max-width: calc(100vw - 40px);
        min-width: 300px;
      `;
      
      document.body.appendChild(message);
      
      // Add functionality to resume button
      const resumeBtn = message.querySelector('#test-user-resume-btn');
      resumeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        message.style.animation = 'fadeOut 0.3s ease-in forwards';
        setTimeout(() => message.remove(), 300);
        showNotification('‚úÖ User pause resumed!', 'warning');
      });
      
      // Auto-dismiss after 4 seconds
      setTimeout(() => {
        if (message.parentNode) {
          message.style.animation = 'fadeOut 0.3s ease-in forwards';
          setTimeout(() => message.remove(), 300);
        }
      }, 4000);
    }

    function clearAllMessages() {
      // Remove all test messages
      const messages = document.querySelectorAll('#test-auto-resume, #test-user-pause');
      messages.forEach(msg => {
        msg.style.animation = 'slideOutTop 0.2s ease-in forwards';
        setTimeout(() => msg.remove(), 200);
      });
      
      showNotification('üßπ All messages cleared!', 'info');
    }

    function showNotification(text, type = 'info') {
      const notification = document.createElement('div');
      notification.textContent = text;
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: ${type === 'success' ? 'rgba(76, 175, 80, 0.9)' : 
                     type === 'warning' ? 'rgba(255, 153, 0, 0.9)' : 
                     'rgba(33, 150, 243, 0.9)'};
        color: white;
        padding: 12px 24px;
        border-radius: 25px;
        font-size: 14px;
        font-weight: 500;
        z-index: 20000;
        animation: pulseIn 0.3s ease-out;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'fadeOut 0.3s ease-in forwards';
        setTimeout(() => notification.remove(), 300);
      }, 2000);
    }

    // Log enhanced mobile features
    console.log('üéÆ Enhanced Mobile Resume Test loaded');
    console.log('üì± Mobile device:', /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
    console.log('üìä Screen:', `${window.innerWidth}x${window.innerHeight}`);
    console.log('‚ú® Features: Enhanced toast design, dedicated resume buttons, improved UX');

    // Add CSS animations for the test
    const style = document.createElement('style');
    style.textContent = `
      @keyframes pulseIn {
        from {
          opacity: 0;
          transform: translateX(-50%) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
      }
      
      @keyframes slideInTop {
        from {
          opacity: 0;
          transform: translateX(-50%) translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
      }
      
      @keyframes slideOutTop {
        from {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
        to {
          opacity: 0;
          transform: translateX(-50%) translateY(-20px);
        }
      }
      
      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
