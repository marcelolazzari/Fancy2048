<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fancy2048 - Debug Version</title>
    <link rel="stylesheet" href="./src/css/main.css">
</head>
<body>
    <div id="debug-info" style="position: fixed; top: 10px; right: 10px; background: #333; color: white; padding: 10px; font-family: monospace; font-size: 12px; z-index: 9999;">
        Loading debug version...
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">2048</div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Fancy2048 Debug...</div>
        </div>
    </div>

    <!-- Game Board Container -->
    <div class="container">
        <div id="game-board" class="game-board" style="margin: 50px auto; width: 400px; height: 400px; background: #ccc;">
            <div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 24px;">
                Game Board Placeholder
            </div>
        </div>
    </div>

    <!-- Debug Scripts -->
    <script>
        console.log('Debug version loading...');
        
        function updateDebug(message) {
            const debug = document.getElementById('debug-info');
            if (debug) {
                debug.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + message;
            }
        }

        updateDebug('HTML loaded');

        // Check if scripts are available
        let scriptLoadStatus = {};
        
        function loadScript(src, name) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    updateDebug(name + ' loaded ✓');
                    scriptLoadStatus[name] = 'loaded';
                    resolve();
                };
                script.onerror = (e) => {
                    updateDebug(name + ' failed ✗');
                    scriptLoadStatus[name] = 'failed';
                    reject(new Error(`Failed to load ${name}`));
                };
                document.head.appendChild(script);
            });
        }

        async function debugLoad() {
            try {
                updateDebug('Loading scripts...');
                
                await loadScript('./src/js/utils.js', 'Utils');
                await loadScript('./src/js/storage.js', 'Storage');
                await loadScript('./src/js/game-engine.js', 'GameEngine');
                await loadScript('./src/js/ui-controller.js', 'UIController');
                await loadScript('./src/js/touch-handler.js', 'TouchHandler');
                await loadScript('./src/js/ai-solver.js', 'AISolver');
                
                updateDebug('All scripts loaded, checking classes...');
                
                // Check if classes are available
                const classes = ['Utils', 'GameEngine', 'UIController', 'TouchHandler', 'AISolver'];
                for (const className of classes) {
                    if (typeof window[className] !== 'undefined') {
                        updateDebug(className + ' class available ✓');
                    } else {
                        updateDebug(className + ' class missing ✗');
                    }
                }
                
                updateDebug('Attempting to initialize...');
                
                // Try to initialize game engine
                if (typeof GameEngine !== 'undefined') {
                    const engine = new GameEngine();
                    updateDebug('GameEngine created ✓');
                    
                    if (typeof UIController !== 'undefined') {
                        const ui = new UIController(engine);
                        updateDebug('UIController created ✓');
                    }
                }
                
                // Hide loading screen
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                
                updateDebug('Debug initialization complete ✓');
                
            } catch (error) {
                updateDebug('ERROR: ' + error.message);
                console.error('Debug load error:', error);
            }
        }

        // Start debug loading when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', debugLoad);
        } else {
            debugLoad();
        }
    </script>
</body>
</html>
